<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plant Disease Detector</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow p-4">
        <h2 class="text-center mb-4">ðŸŒ± Plant Disease Detection</h2>

        <form id="uploadForm">
            <div class="mb-3">
                <label class="form-label">Upload Plant Leaf Image</label>
                <input class="form-control" type="file" id="imageInput" accept="image/*" required>
            </div>

            <div class="text-center mb-3">
                <img id="preview" src="#" style="max-width: 200px; display: none; border-radius: 10px;">
            </div>

            <button class="btn btn-success w-100">Predict Disease</button>
        </form>

        <div id="result" class="mt-4"></div>
    </div>
</div>

<script>
    // Preview Image
    document.getElementById("imageInput").addEventListener("change", function(){
        const file = this.files[0];
        if(file){
            const reader = new FileReader();
            reader.onload = function(e){
                const preview = document.getElementById("preview");
                preview.src = e.target.result;
                preview.style.display = "block";
            }
            reader.readAsDataURL(file);
        }
    });

    // Submit to Flask API
    document.getElementById("uploadForm").addEventListener("submit", async function(e){
        e.preventDefault();

        const fileInput = document.getElementById("imageInput");
        const file = fileInput.files[0];

        const formData = new FormData();
        formData.append("file", file);

        let response = await fetch("/predict", {
            method: "POST",
            body: formData
        });

        let result = await response.json();

        document.getElementById("result").innerHTML = `
            <div class="alert alert-info">
                <h5><strong>Disease:</strong> ${result.disease}</h5>
                <p><strong>Confidence:</strong> ${result.confidence}%</p>
                <p><strong>Suggested Remedy:</strong><br>${result.remedy}</p>
            </div>
        `;
    });
</script>

</body>
</html>